# ุฏููู ุงููุดุฑ ุนูู Render - ุจูุช ุงูุฃุฐูุงุฑ ุงูุฅุณูุงููุฉ

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงูุฏููู ููุถุญ ููููุฉ ูุดุฑ ุงูุจูุช ุนูู ููุตุฉ [Render](https://render.com) ุจุงุณุชุฎุฏุงู gunicorn ูุชุดุบูู Flask.

---

## ๐ ูุชุทูุจุงุช ุงููุดุฑ

### 1. ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุงููุทููุจุฉ

ูุฌุจ ุชูููู ุงููุชุบูุฑุงุช ุงูุชุงููุฉ ูู ุฅุนุฏุงุฏุงุช Render:

| ุงููุชุบูุฑ | ุงููุตู | ูุซุงู | ูุทููุจุ |
|---------|--------|------|--------|
| `BOT_TOKEN` | ุชููู ุงูุจูุช ูู @BotFather | `1234567890:ABCdefGHIjklMNOpqrsTUVwxyz` | โ ูุนู |
| `PORT` | ุงููููุฐ (ูุชู ุชุนูููู ุชููุงุฆูุงู ุจูุงุณุทุฉ Render) | `10000` | โ๏ธ ุชููุงุฆู |
| `RENDER_EXTERNAL_HOSTNAME` | ุงุณู ุงููุถูู (ูุชู ุชุนูููู ุชููุงุฆูุงู) | `your-app.onrender.com` | โ๏ธ ุชููุงุฆู |

**ููุงุญุธุฉ ูุงูุฉ**: 
- `PORT` ู `RENDER_EXTERNAL_HOSTNAME` ูุชู ุชุนูููููุง ุชููุงุฆูุงู ุจูุงุณุทุฉ Render
- ูุง ุชุญุชุงุฌ ูุฅุถุงูุชููุง ูุฏููุงู

### 2. ุฃูุฑ ุงูุจุฏุก (Start Command)

ุงุณุชุฎุฏู ุงูุฃูุฑ ุงูุชุงูู ูู ุฅุนุฏุงุฏุงุช Render:

```bash
gunicorn App:app --bind 0.0.0.0:$PORT --workers 1 --timeout 120 --log-level info
```

**ุดุฑุญ ุงูุฎูุงุฑุงุช:**
- `App:app` - ุชุญููู ุชุทุจูู Flask ูู ููู App.py
- `--bind 0.0.0.0:$PORT` - ุงูุฑุจุท ุจุฌููุน ุงููุงุฌูุงุช ุนูู ุงููููุฐ ุงููุญุฏุฏ
- `--workers 1` - ุงุณุชุฎุฏุงู worker ูุงุญุฏ (ูุงูู ูุจูุช Telegram)
- `--timeout 120` - ูููุฉ 120 ุซุงููุฉ ููุทูุจุงุช
- `--log-level info` - ูุณุชูู ุงูุณุฌูุงุช INFO

---

## ๐ ุฎุทูุงุช ุงููุดุฑ ุนูู Render

### ุงูุฎุทูุฉ 1: ุฅูุดุงุก ุญุณุงุจ ุนูู Render

1. ุงุฐูุจ ุฅูู [render.com](https://render.com)
2. ุณุฌู ุงูุฏุฎูู ุฃู ุฃูุดุฆ ุญุณุงุจ ุฌุฏูุฏ
3. ุงุฑุจุท ุญุณุงุจ GitHub ุงูุฎุงุต ุจู

### ุงูุฎุทูุฉ 2: ุฅูุดุงุก Web Service ุฌุฏูุฏ

1. ูู ููุญุฉ ุงูุชุญููุ ุงุถุบุท ุนูู **"New +"**
2. ุงุฎุชุฑ **"Web Service"**
3. ุงุฎุชุฑ ุงููุณุชูุฏุน ุงูุฎุงุต ุจู ูู ุงููุงุฆูุฉ

### ุงูุฎุทูุฉ 3: ุชูููู ุงูุฎุฏูุฉ

#### ุงูุฅุนุฏุงุฏุงุช ุงูุฃุณุงุณูุฉ:
- **Name**: ุงุฎุชุฑ ุงุณูุงู ูุฑูุฏุงู (ูุซู: `azkar-bot`)
- **Region**: ุงุฎุชุฑ ุฃูุฑุจ ููุทูุฉ ูู
- **Branch**: `main` ุฃู `master`
- **Runtime**: `Python 3`
- **Build Command**: 
  ```bash
  pip install -r requirements.txt
  ```
- **Start Command**: 
  ```bash
  gunicorn App:app --bind 0.0.0.0:$PORT --workers 1 --timeout 120 --log-level info
  ```

#### ูุชุบูุฑุงุช ุงูุจูุฆุฉ:
1. ูู ูุณู **Environment**ุ ุฃุถู:
   - **Key**: `BOT_TOKEN`
   - **Value**: ุชููู ุงูุจูุช ุงูุฎุงุต ุจู ูู @BotFather

### ุงูุฎุทูุฉ 4: ุงููุดุฑ

1. ุงุถุบุท ุนูู **"Create Web Service"**
2. ุณููุดุฑ Render ุงูุจูุช ุชููุงุฆูุงู
3. ุงูุชุธุฑ ุญุชู ููุชูู ุงููุดุฑ (ุนุงุฏุฉ 2-5 ุฏูุงุฆู)

### ุงูุฎุทูุฉ 5: ุงูุชุญูู ูู ุงูููุจ ููู

ุจุนุฏ ุงูุชูุงู ุงููุดุฑ:

1. ุงูุชุญ ุฑุงุจุท ุงูุฎุฏูุฉ ูู ุงููุชุตูุญ: `https://your-app.onrender.com`
2. ูุฌุจ ุฃู ุชุฑู ุฑุณุงูุฉ: "ููุฑ ุงูุฐูุฑ โ ุงูุจูุช ูุนูู โ"
3. ุชุญูู ูู ุญุงูุฉ ุงูููุจ ููู: `https://your-app.onrender.com/health`
4. ุฅุฐุง ูู ููู ุงูููุจ ููู ูุถุจูุทุงูุ ูู ุจุฒูุงุฑุฉ: `https://your-app.onrender.com/setwebhook`

---

## ๐ ุงูุชุญูู ูู ุงูุญุงูุฉ

### Endpoint ุงูุฑุฆูุณู (/)
```bash
curl https://your-app.onrender.com/
```

**ุงููุงุชุฌ ุงููุชููุน:**
```
ููุฑ ุงูุฐูุฑ โ ุงูุจูุช ูุนูู โ
Webhook: โ Configured
PORT: 10000
```

### Health Check (/health)
```bash
curl https://your-app.onrender.com/health
```

**ุงููุงุชุฌ ุงููุชููุน (JSON):**
```json
{
  "status": "healthy",
  "bot": "operational",
  "port": 10000,
  "port_source": "environment",
  "webhook_url": "https://your-app.onrender.com/webhook",
  "webhook_configured": true,
  "webhook_expected": "https://your-app.onrender.com/webhook",
  "webhook_match": true,
  "pending_updates": 0,
  "last_error": "None",
  "render_hostname": "your-app.onrender.com",
  "timezone": "Asia/Riyadh",
  "scheduler_running": true
}
```

### ุชูุงุตูู ุงูููุจ ููู (/check-webhook)
```bash
curl https://your-app.onrender.com/check-webhook
```
ูุนุฑุถ ุตูุญุฉ HTML ุจุฌููุน ุชูุงุตูู ุงูููุจ ููู.

---

## ๐ ูุฑุงูุจุฉ ุงูุณุฌูุงุช

### ุนุฑุถ ุงูุณุฌูุงุช ุงูุญูุฉ

ูู ููุญุฉ ุชุญูู Render:
1. ุงูุชุญ ุฎุฏูุชู
2. ุงุฐูุจ ุฅูู ุชุจููุจ **"Logs"**
3. ุณุชุดุงูุฏ ุงูุณุฌูุงุช ุงูุญูุฉ

### ููุฎุต ุจุฏุก ุงูุชุดุบูู

ุนูุฏ ุจุฏุก ุงูุจูุชุ ุณุชุธูุฑ ูุฐู ุงููุนูููุงุช ูู ุงูุณุฌูุงุช:

```
================================================================================
๐ BOT STARTUP SUMMARY
================================================================================
๐ Environment: Production (Render)
๐ PORT: 10000 (Source: Environment Variable)
๐ Webhook URL: https://your-app.onrender.com/webhook
๐ Render Hostname: your-app.onrender.com
๐ Timezone: Asia/Riyadh
๐ค Bot Token: โ Configured
๐ Scheduler: โ Running
================================================================================
```

### ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ ูู ุงูุณุฌูุงุช

| ุงูุฑูุฒ | ุงููุนูู |
|------|--------|
| โ | ูุฌุงุญ ุงูุนูููุฉ |
| โ๏ธ | ุชุญุฐูุฑ |
| โ | ุฎุทุฃ |
| ๐ | ุชุญูู ุฌุงุฑู |
| ๐จ | ุฑุณุงูุฉ ูุงุฑุฏุฉ |
| ๐ง | ุฅุนุฏุงุฏ ูุฏูู |

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงูุจูุช ูุง ูุณุชุฌูุจ

#### 1. ุชุญูู ูู ุงูุณุฌูุงุช
```
ุงูุชุญ ููุญุฉ Render > Logs
```
ุงุจุญุซ ุนู ุฃู ุฑุณุงุฆู ุฎุทุฃ ุญูุฑุงุก (โ)

#### 2. ุชุญูู ูู ุงูููุจ ููู
```bash
curl https://your-app.onrender.com/health
```

ุฅุฐุง ูุงู `webhook_configured: false`:
```bash
curl https://your-app.onrender.com/setwebhook
```

#### 3. ุชุญูู ูู PORT
ูู ุงูุณุฌูุงุชุ ุงุจุญุซ ุนู:
```
โ PORT configured: 10000 (from environment)
```

ุฅุฐุง ุฑุฃูุช `from default` ุจุฏูุงู ูู `from environment`ุ ููุฐุง ูุนูู ุฃู Render ูู ูุนูู PORT ุชููุงุฆูุงู (ูุงุฏุฑ ุฌุฏุงู).

### ูุดููุฉ: "Webhook URL mismatch"

**ุงูุฃุนุฑุงุถ:** ูู `/health` ุชุฑู:
```json
{
  "status": "misconfigured",
  "webhook_match": false
}
```

**ุงูุญู:**
1. ุงูุชุญ: `https://your-app.onrender.com/setwebhook`
2. ุฃู ุฃุนุฏ ุชุดุบูู ุงูุฎุฏูุฉ ูู ููุญุฉ Render

### ูุดููุฉ: "Port already in use"

**ุงูุณุจุจ:** ุบุงูุจุงู ูุญุฏุซ ุนูุฏ ุงูุชุทููุฑ ุงููุญููุ ูุง ูุญุฏุซ ุนูู Render.

**ุงูุญู ููุชุทููุฑ ุงููุญูู:**
```bash
export PORT=8080
python App.py
```

### ูุดููุฉ: ุงูููุจ ููู ูุชู ุฅุฒุงูุชู ุชููุงุฆูุงู

**ุงูุญู:** ุงูุจูุช ูุญุชูู ุนูู ุขููุฉ ุชุญูู ุฏูุฑูุฉ ูู 30 ุฏูููุฉ ุชุนูุฏ ุถุจุท ุงูููุจ ููู ุชููุงุฆูุงู ุฅุฐุง ุชูุช ุฅุฒุงูุชู.

ูู ุงูุณุฌูุงุช ุณุชุดุงูุฏ:
```
๐ Starting webhook verification...
โ Webhook verification successful
```

---

## โ๏ธ ุงูุชูููู ุงููุชูุฏู

### ุชุบููุฑ ุนุฏุฏ Workers

ุฅุฐุง ูุงู ุงูุจูุช ูุฎุฏู ุงูุนุฏูุฏ ูู ุงููุฌููุนุงุช (1000+):
```bash
gunicorn App:app --bind 0.0.0.0:$PORT --workers 2 --timeout 120 --log-level info
```

**ููุงุญุธุฉ:** ูุง ุชุฒุฏ ุนู 2 workers ูุฃู APScheduler ูุนูู ูู ูู worker.

### ุชุบููุฑ ูููุฉ ุงูุทูุจุงุช

ููุทูุจุงุช ุงูุทูููุฉ:
```bash
gunicorn App:app --bind 0.0.0.0:$PORT --workers 1 --timeout 300 --log-level info
```

### ุชูุนูู ุณุฌูุงุช ุงูุชุตุญูุญ

ููุญุตูู ุนูู ูุนูููุงุช ุฃูุซุฑ ุชูุตููุงู:
```bash
gunicorn App:app --bind 0.0.0.0:$PORT --workers 1 --timeout 120 --log-level debug
```

---

## ๐ ุงูุชุญุฏูุซุงุช ุงูุชููุงุฆูุฉ

### ูู GitHub

Render ูุฏุนู ุงููุดุฑ ุงูุชููุงุฆู:

1. ูู ุฅุนุฏุงุฏุงุช ุงูุฎุฏูุฉุ ูุนูู **"Auto-Deploy"**
2. ุงุฎุชุฑ ุงููุฑุน (Branch) ุงููุทููุจ
3. ุนูุฏ ูู pushุ ุณููุดุฑ Render ุงูุชุญุฏูุซุงุช ุชููุงุฆูุงู

### ุฅููุงู ุงููุดุฑ ุงูุชููุงุฆู

ุฅุฐุง ุฃุฑุฏุช ุงูุชุญูู ุงููุฏูู:
1. ุนุทูู **"Auto-Deploy"**
2. ุงุถุบุท **"Manual Deploy"** ุนูุฏ ุงูุญุงุฌุฉ

---

## ๐ฐ ุงูุฎุทุท ูุงูุชุณุนูุฑ

### Free Plan (ุงููุฌุงูู)
- โ 750 ุณุงุนุฉ/ุดูุฑ ูุฌุงูุงู
- โ ูุงูู ูุชุดุบูู ุงูุจูุช 24/7
- โ๏ธ ููุงู ุจุนุฏ 15 ุฏูููุฉ ูู ุนุฏู ุงููุดุงุท
- โ๏ธ ูุณุชุบุฑู ~30 ุซุงููุฉ ููุงุณุชููุงุธ

**ููุงุญุธุฉ:** ููุงุณุชุฎุฏุงู ุงูุฅูุชุงุฌูุ ูููุตุญ ุจุงุณุชุฎุฏุงู ุฎุทุฉ ูุฏููุนุฉ ูุชุฌูุจ ุงูููู.

### Starter Plan ($7/ุดูุฑ)
- โ ูุนูู 24/7 ุจุฏูู ุงููุทุงุน
- โ ูุง ููุงู ุฃุจุฏุงู
- โ ุฃุฏุงุก ุฃูุถู
- โ ููุงุฑุฏ ูุฎุตุตุฉ

---

## ๐ก๏ธ ุงูุฃูุงู

### ุญูุงูุฉ ุงูุชููู
- โ ูุง ุชุถุน BOT_TOKEN ูู ุงูููุฏ
- โ ุงุณุชุฎุฏู ูุชุบูุฑุงุช ุงูุจูุฆุฉ ูู Render
- โ ูุง ุชุฑูุน ููู `.env` ุฅูู GitHub

### HTTPS
- โ Render ูููุฑ HTTPS ุชููุงุฆูุงู
- โ ุดูุงุฏุฉ SSL ูุฌุงููุฉ
- โ Telegram ูุทูุจ HTTPS ููููุจ ููู

---

## ๐ ููุงุฑุฏ ุฅุถุงููุฉ

### ุงููุซุงุฆู ุงูุฑุณููุฉ:
- [Render Python Guide](https://render.com/docs/deploy-flask)
- [Gunicorn Documentation](https://docs.gunicorn.org/)
- [Telegram Bot API](https://core.telegram.org/bots/api)

### ูููุงุช ุงููุดุฑูุน:
- [README.md](README.md) - ุฏููู ุงูุงุณุชุฎุฏุงู ุงูุนุงู
- [DEPLOYMENT.md](DEPLOYMENT.md) - ุฎูุงุฑุงุช ุงููุดุฑ ุงูุฃุฎุฑู
- [TESTING.md](TESTING.md) - ุฏููู ุงูุงุฎุชุจุงุฑ

---

## โ ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ

ูุจู ุงููุดุฑุ ุชุฃูุฏ ูู:

- [ ] ุญุตูุช ุนูู ุชููู ุงูุจูุช ูู @BotFather
- [ ] ุฃุถูุช BOT_TOKEN ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
- [ ] ุถุจุทุช ุฃูุฑ ุงูุจุฏุก ุนูู gunicorn
- [ ] ูุดุฑุช ุงูุฎุฏูุฉ ุจูุฌุงุญ
- [ ] ุชุญููุช ูู `/health` endpoint
- [ ] ุงูููุจ ููู ูุถุจูุท ุจุดูู ุตุญูุญ
- [ ] ุงูุจูุช ูุณุชุฌูุจ ูู /start
- [ ] ุงูุณุฌูุงุช ุชุธูุฑ "BOT STARTUP SUMMARY"

---

## ๐ ุงูุฏุนู

### ุนูุฏ ููุงุฌูุฉ ูุดุงูู:

1. **ุชุญูู ูู ุงูุณุฌูุงุช ุฃููุงู**
   ```
   Render Dashboard > Your Service > Logs
   ```

2. **ุชุญูู ูู ุงูุตุญุฉ**
   ```bash
   curl https://your-app.onrender.com/health
   ```

3. **ุฃุนุฏ ุถุจุท ุงูููุจ ููู**
   ```bash
   curl https://your-app.onrender.com/setwebhook
   ```

4. **ุงุชุตู ุจุงูุฏุนู**
   - ุงููุทูุฑ: [@dev3bod](https://t.me/dev3bod)
   - ุงููุฌููุนุฉ: [@NourAdhkar](https://t.me/NourAdhkar)

---

## ๐ ุงูุฎูุงุตุฉ

ุจุนุฏ ุงุชุจุงุน ูุฐุง ุงูุฏูููุ ุงูุจูุช ูุฌุจ ุฃู ูููู:

โ ููุดูุฑ ุนูู Render ุจูุฌุงุญ  
โ ูุณุชุฎุฏู gunicorn ููุชุดุบูู  
โ ุงูููุจ ููู ูุถุจูุท ุชููุงุฆูุงู  
โ PORT ูุญุฏุฏ ุจุดูู ุตุญูุญ ูู ุงูุจูุฆุฉ  
โ ุงูุณุฌูุงุช ูุงุถุญุฉ ููููุฏุฉ  
โ ูุนูู 24/7 (ูุน ุฎุทุฉ ูุฏููุนุฉ)  

**ุจุงูุชูููู! ๐**

---

*ุขุฎุฑ ุชุญุฏูุซ: ููุงูุฑ 2026*
