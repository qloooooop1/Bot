# ğŸ—ï¸ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø¨ÙˆØª - Islamic Azkar Bot

## Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ù†ÙŠØ©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Islamic Azkar Bot                         â”‚
â”‚                  Telegram Group Manager                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚  Flask Server  â”‚              â”‚  Bot Engine â”‚
    â”‚   (Webhook)    â”‚              â”‚  (Telebot)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
            â”‚                               â”‚
            â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  Message Handler   â”‚â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
                               â”‚            â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Admin Panel  â”‚    â”‚ Auto Posting  â”‚
    â”‚  (/admin)    â”‚    â”‚  (Scheduler)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                 â”‚
            â”‚                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚        SQLite Database             â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚ Settings â”‚ Azkar Schedule   â”‚  â”‚
    â”‚  â”‚ Violationsâ”‚ Admins          â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚      azkar_data.json             â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
    â”‚  â”‚ Morning â”‚ Evening  â”‚          â”‚
    â”‚  â”‚ Azkar   â”‚ Azkar    â”‚          â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ØªØ¯ÙÙ‚ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª

### 1. Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
```
Telegram â†’ Webhook â†’ Flask â†’ Bot Handler
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚             â”‚             â”‚
                Service Msg   Commands    Regular Msg
                    â”‚             â”‚             â”‚
                Delete?       /admin        Phone Check
```

### 2. Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
```
/admin Command
    â”‚
    â”œâ”€â–º Check Admin Status
    â”‚       â”‚
    â”‚       â””â”€â–º Show Control Panel
    â”‚               â”‚
    â”‚               â”œâ”€â–º Toggle Azkar
    â”‚               â”œâ”€â–º Toggle Service Deletion
    â”‚               â”œâ”€â–º Toggle Phone Detection
    â”‚               â”œâ”€â–º Set Interval
    â”‚               â”œâ”€â–º Post Now
    â”‚               â””â”€â–º Show Stats
    â”‚
    â””â”€â–º Callback Handler
            â”‚
            â””â”€â–º Update Settings
                    â”‚
                    â””â”€â–º Refresh Panel
```

### 3. Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ø£Ø°ÙƒØ§Ø±
```
Scheduler Thread (Every 30 min)
    â”‚
    â”œâ”€â–º Check All Groups with Azkar Enabled
    â”‚
    â”œâ”€â–º For Each Group:
    â”‚       â”‚
    â”‚       â”œâ”€â–º Get Last Posted Time
    â”‚       â”œâ”€â–º Check Interval
    â”‚       â””â”€â–º Time to Post?
    â”‚               â”‚
    â”‚               â”œâ”€â–º Get Current Time
    â”‚               â”œâ”€â–º Determine Type (Morning/Evening)
    â”‚               â”œâ”€â–º Select Random Azkar
    â”‚               â””â”€â–º Post to Group
    â”‚
    â””â”€â–º Update Schedule Database
```

### 4. ÙƒØ´Ù Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¬ÙˆØ§Ù„Ø§Øª
```
Message Received
    â”‚
    â”œâ”€â–º Phone Detection Enabled?
    â”‚       â”‚
    â”‚       â””â”€â–º Extract Hidden Phone?
    â”‚               â”‚
    â”‚               â”œâ”€â–º Delete Message
    â”‚               â”œâ”€â–º Check Violations
    â”‚               â”‚       â”‚
    â”‚               â”‚       â”œâ”€â–º First Time: Mute 24h
    â”‚               â”‚       â””â”€â–º Second Time: Ban
    â”‚               â”‚
    â”‚               â””â”€â–º Send Notice (Auto-delete after 2 min)
    â”‚
    â””â”€â–º Continue Normal Processing
```

## Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

### ğŸ›ï¸ Admin Panel
```python
@bot.message_handler(commands=['admin'])
    â”‚
    â”œâ”€â–º is_admin() â†’ Check Permissions
    â”œâ”€â–º get_settings() â†’ Load Settings
    â”œâ”€â–º Create Inline Keyboard
    â””â”€â–º Send Control Panel
```

### ğŸ“¿ Azkar System
```python
schedule_azkar() [Thread]
    â”‚
    â”œâ”€â–º Every 30 minutes:
    â”‚       â”‚
    â”‚       â”œâ”€â–º Check interval
    â”‚       â”œâ”€â–º get_azkar_type()
    â”‚       â””â”€â–º post_azkar()
    â”‚
    â””â”€â–º Update azkar_schedule table
```

### ğŸ—‘ï¸ Service Message Handler
```python
@bot.message_handler(content_types=[...])
    â”‚
    â”œâ”€â–º Check delete_service_messages
    â””â”€â–º Delete if enabled
```

### ğŸ” Phone Detection
```python
extract_hidden_phone(text)
    â”‚
    â”œâ”€â–º Replace characters
    â”œâ”€â–º Extract digits
    â”œâ”€â–º Pattern matching
    â””â”€â–º Return True/False
```

## Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### Ø¬Ø¯ÙˆÙ„ Settings
```sql
CREATE TABLE settings (
    chat_id INTEGER PRIMARY KEY,
    azkar_enabled INTEGER,
    delete_service_messages INTEGER,
    interval_hours INTEGER,
    phone_detection_enabled INTEGER
)
```

### Ø¬Ø¯ÙˆÙ„ Violations
```sql
CREATE TABLE violations (
    user_id INTEGER PRIMARY KEY,
    count INTEGER
)
```

### Ø¬Ø¯ÙˆÙ„ Azkar Schedule
```sql
CREATE TABLE azkar_schedule (
    chat_id INTEGER PRIMARY KEY,
    last_posted TEXT,
    current_type TEXT
)
```

## ØªØ¯ÙÙ‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

```
Environment Variables
    â”‚
    â”œâ”€â–º BOT_TOKEN
    â”œâ”€â–º ALLOWED_CHAT_ID
    â””â”€â–º WEBHOOK_URL
            â”‚
            â–¼
    App.py Initialization
            â”‚
            â”œâ”€â–º Load azkar_data.json
            â”œâ”€â–º Create Database Tables
            â”œâ”€â–º Start Scheduler Thread
            â””â”€â–º Start Flask Server
                    â”‚
                    â–¼
            Handle Incoming Updates
                    â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
            â”‚               â”‚
        Commands       Messages
            â”‚               â”‚
        /admin      Phone/Service Check
```

## Ø§Ù„ØªÙˆÙ‚ÙŠØªØ§Øª

### Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­
- **ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø¡**: 5:00 ØµØ¨Ø§Ø­Ø§Ù‹
- **ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡**: 3:00 Ø¹ØµØ±Ø§Ù‹
- **Ø§Ù„ÙØ§ØµÙ„ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ**: Ø³Ø§Ø¹ØªØ§Ù†

### Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡
- **ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø¡**: 5:00 Ù…Ø³Ø§Ø¡Ù‹
- **ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡**: 12:00 Ù…Ù†ØªØµÙ Ø§Ù„Ù„ÙŠÙ„
- **Ø§Ù„ÙØ§ØµÙ„ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ**: Ø³Ø§Ø¹ØªØ§Ù†

### ÙØ­Øµ Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø©
- **Ø§Ù„ØªÙƒØ±Ø§Ø±**: ÙƒÙ„ 30 Ø¯Ù‚ÙŠÙ‚Ø©
- **Thread**: Daemon (ÙŠÙ†ØªÙ‡ÙŠ Ù…Ø¹ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬)

## Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª

```
Request â†’ Verify Chat ID â†’ Verify Admin Status â†’ Process
    â”‚            â”‚                  â”‚
    âœ— Reject     âœ— Reject          âœ“ Allow
```

### Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„ÙˆØµÙˆÙ„
1. **Ø§Ù„Ù…Ø´Ø±ÙÙˆÙ†**: ÙˆØµÙˆÙ„ ÙƒØ§Ù…Ù„ Ù„Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
2. **Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡**: Ø®Ø§Ø¶Ø¹ÙˆÙ† Ù„Ù„ÙØ­Øµ ÙˆØ§Ù„Ø±Ù‚Ø§Ø¨Ø©
3. **Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰**: ØªØ¬Ø§Ù‡Ù„ ÙƒØ§Ù…Ù„

---

Ù‡Ø°Ø§ Ø§Ù„Ù‡ÙŠÙƒÙ„ ÙŠØ¶Ù…Ù†:
- âœ… Ø£Ø¯Ø§Ø¡ Ø¹Ø§Ù„ÙŠ Ù…Ø¹ Threading
- âœ… Ù…ÙˆØ«ÙˆÙ‚ÙŠØ© Ù…Ø¹ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
- âœ… Ø£Ù…Ø§Ù† Ù…Ø¹ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
- âœ… Ù…Ø±ÙˆÙ†Ø© Ù…Ø¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ®ØµÙŠØµ
